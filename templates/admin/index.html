{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block extrastyle %}{{ block.super }}<link rel="stylesheet" type="text/css" href="{% static "admin/css/dashboard.css" %}" />{% endblock %}

{% block coltype %}colMS{% endblock %}

{% block bodyclass %}{{ block.super }} dashboard{% endblock %}

{% block breadcrumbs %}{% endblock %}

{% block content %}


        <div class="row">
        <div class="col-lg-3 col-xs-6">
          <!-- small box -->
          <div class="small-box bg-aqua">
            <div class="inner">
              <h3>{{users}}</h3>

              <p>Admin</p>
            </div>
            <div class="icon">
              <i class="ion ion-person "></i>
            </div>
            <a href="#" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>
          </div>
        </div>
        <!-- ./col -->
        <div class="col-lg-3 col-xs-6">
          <!-- small box -->
          <div class="small-box bg-green">
            <div class="inner">
              <h3>{{pilgrims}}</h3>
              <p>pilgrim</p>
            </div>
            <div class="icon">
              <i class="ion ion-stats-bars"></i>
            </div>
            <a href="#" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>
          </div>
        </div>
        <!-- ./col -->
        <div class="col-lg-3 col-xs-6">
          <!-- small box -->
          <div class="small-box bg-yellow">
            <div class="inner">
              <h3>{{vendors}}</h3>

              <p>vendor</p>
            </div>
            <div class="icon">
              <i class="ion ion-person-add"></i>
            </div>
            <a href="#" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>
          </div>
        </div>
        <!-- ./col -->
            <!-- ./col -->
        <div class="col-lg-3 col-xs-6">
          <!-- small box -->
          <div class="small-box bg-red">
            <div class="inner">
              <h3>{{categories}}</h3>

              <p>Category</p>
            </div>
            <div class="icon">
              <i class="ion ion-person-add"></i>
            </div>
            <a href="#" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>
          </div>
        </div>
        <!-- ./col -->

      </div>


    <div class="row">
                <div class="col-md-6">
                    <div class="box box-danger">
                    <div class="box-header with-border">
                      <h3 class="box-title">Pilgrims Nationalities Ratio</h3>

                      <div class="box-tools pull-right">
                        <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                        </button>
                        <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                      </div>
                    </div>
                    <div class="box-body">
                      <canvas id="pilgrims_chart" style="height: 248px; width: 497px;" width="497" height="248"></canvas>
                    </div>
                    <!-- /.box-body -->
                  </div>
                </div>

        <div class="col-md-6">
                    <div class="box box-danger">
                    <div class="box-header with-border">
                      <h3 class="box-title">Vendors Per Category</h3>

                      <div class="box-tools pull-right">
                        <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                        </button>
                        <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                      </div>
                    </div>
                    <div class="box-body">
                        <canvas id="vendors_chart" style="height: 248px; width: 497px;" width="497" height="248"></canvas>
                    </div>
                    <!-- /.box-body -->
                  </div>
                </div>
              </div>


{% endblock %}

{% block sidebar %}
{% endblock %}


{% block extra_foot %}
{% load staticfiles %}

<script src="{% static "statistics_app/scripts/Chart.min.js" %}"></script>
<script>
            $.ajax({
                    methode:'GET',
                    url: 'statistics/chart/pilgrims_ratio',

                    success:function(response)
                    {
                        var ctx = document.getElementById('pilgrims_chart').getContext('2d');
                        var myChart = new Chart(ctx, {
                            type: 'doughnut',
                            data: {
                                labels: response.labels,
                                datasets: [{
                                    label: '# of Votes',
                                    data: response.defult,
                                    backgroundColor: [
                                        '#f56954',
                                        '#00a65a',
                                        '#f39c12',
                                        '#00c0ef',
                                        '#3c8dbc',
                                        '#d2d6de'
                                    ],
                                    borderColor: [
                                        'rgba(255, 99, 132, 1)',
                                        'rgba(54, 162, 235, 1)',
                                        'rgba(255, 206, 86, 1)',
                                        'rgba(75, 192, 192, 1)',
                                        'rgba(153, 102, 255, 1)',
                                        'rgba(255, 159, 64, 1)'
                                    ],
                                    borderWidth: 1
                                }]
                            },
                            options: {
                                scales: {
                                    yAxes: [{
                                        ticks: {
                                            beginAtZero: true
                                        }
                                    }]
                                }
                            }
                        });
                    },error:function(response)
                    {
                        console.log('error');
                        console.log(response);
                    }
                }
            );

</script>

<script>
            $.ajax({
                    methode:'GET',
                    url: 'statistics/chart/vendors_categories',

                    success:function(response)
                    {
                        var ctx = document.getElementById('vendors_chart').getContext('2d');
                        var myChart = new Chart(ctx, {
                            type: 'doughnut',
                            data: {
                                labels: response.labels,
                                datasets: [{
                                    label: '# of Votes',
                                    data: response.defult,
                                    backgroundColor: [
                                        '#f56954',
                                        '#00a65a',
                                        '#f39c12',
                                        '#00c0ef',
                                        '#3c8dbc',
                                        '#d2d6de'
                                    ],
                                    borderColor: [
                                        'rgba(255, 99, 132, 1)',
                                        'rgba(54, 162, 235, 1)',
                                        'rgba(255, 206, 86, 1)',
                                        'rgba(75, 192, 192, 1)',
                                        'rgba(153, 102, 255, 1)',
                                        'rgba(255, 159, 64, 1)'
                                    ],
                                    borderWidth: 1
                                }]
                            },
                            options: {
                                scales: {
                                    yAxes: [{
                                        ticks: {
                                            beginAtZero: true
                                        }
                                    }]
                                }
                            }
                        });
                    },error:function(response)
                    {
                        console.log('error');
                        console.log(response);
                    }
                }
            );

</script>

{% endblock %}

